## 백엔드 요구사항 문서

### 개요

이 문서는 Laravel 기반의 경매 애플리케이션의 백엔드 요구사항을 정의합니다. 이 애플리케이션은 Sanctum을 사용하여 인증을 처리하며, 헤이딜러 스타일의 경매 기능을 제공합니다.

### 인증 및 권한

-   **인증**:
    -   **Laravel Sanctum**: API 토큰 기반 인증을 구현하여 모바일 및 SPA 환경에서의 인증을 처리합니다.
    -   **세션 기반 인증**: 웹 애플리케이션에서의 세션 기반 인증을 지원합니다.
-   **권한 관리**:
    -   **Permissions ACL**: 사용자 역할 및 권한을 관리하기 위해 Permissions ACL 라이브러리를 사용합니다.
    -   **역할 기반 접근 제어**: 사용자 역할(예: 관리자, 딜러, 일반 사용자)에 따라 접근 권한을 제어합니다.
        -   **일반 사용자**: 본인이 등록한 경매만 조회할 수 있습니다.
        -   **딜러**: 진행 중인 경매와 본인이 입찰한 경매만 조회할 수 있습니다.
        -   **관리자**: 모든 경매를 조회할 수 있습니다.

### 사용자 관리

-   **회원가입**: 사용자는 이메일과 비밀번호를 통해 회원가입할 수 있습니다.
-   **로그인/로그아웃**: 사용자는 이메일 또는 전화번호를 통해 로그인할 수 있으며, 로그아웃 기능을 제공합니다.
-   **비밀번호 재설정**: 사용자는 전화번호를 통해 비밀번호 재설정 링크를 받을 수 있습니다.
-   **프로필 관리**: 사용자는 자신의 프로필 정보를 조회하고 수정할 수 있습니다.

### 경매 관리

-   **경매 생성**: 인증된 사용자는 경매를 생성할 수 있습니다. 경매 생성 시 필요한 필수 정보는 `owner_name`, `car_no`, `region`, `addr_post`, `addr1`, `addr2`입니다.
-   **경매 조회**: 사용자는 자신의 경매를 조회할 수 있으며, 딜러는 진행 중인 경매와 자신의 입찰을 조회할 수 있습니다.
-   **경매 수정**: 사용자는 자신의 경매 정보를 수정할 수 있으며, 특정 필드만 수정이 허용됩니다.
-   **경매 삭제**: 사용자는 자신의 경매를 삭제할 수 있습니다.

### 입찰 관리

-   **입찰 생성**: 딜러는 경매에 입찰할 수 있으며, 입찰 시 `auction_id`와 `price`가 필수입니다.
-   **입찰 조회**: 사용자는 자신의 입찰 정보를 조회할 수 있습니다.
-   **입찰 수정 및 삭제**: 사용자는 자신의 입찰 정보를 수정하거나 삭제할 수 있습니다.

### 리뷰 관리

-   **리뷰 작성**: 경매가 완료된 후, 사용자는 리뷰를 작성할 수 있습니다.
-   **리뷰 조회**: 사용자는 자신의 리뷰를 조회할 수 있습니다.
-   **리뷰 수정 및 삭제**: 사용자는 자신의 리뷰를 수정하거나 삭제할 수 있습니다.

### 기타 기능

-   **엑셀 다운로드**: 관리자는 특정 리소스의 데이터를 엑셀 파일로 다운로드할 수 있습니다.
-   **로그 관리**: 모든 주요 활동은 로그로 기록됩니다.

### 보안

-   **CSRF 보호**: CSRF 토큰을 사용하여 요청의 무결성을 보장합니다.
-   **데이터 검증**: 모든 입력 데이터는 서버 측에서 검증됩니다.

### 코드 구조

-   **컨트롤러**: `CrudControllerTrait`를 사용하여 기본 CRUD 기능을 제공합니다.
-   **서비스**: `CrudTrait`를 사용하여 데이터 처리 로직을 구현합니다.
-   **모델**: Eloquent 모델을 사용하여 데이터베이스와 상호작용합니다.

### 파일 구조

-   **컨트롤러**: `app/Http/Controllers/Api/` 디렉토리에 위치하며, 각 리소스에 대한 API 엔드포인트를 정의합니다.
-   **서비스**: `app/Services/` 디렉토리에 위치하며, 비즈니스 로직을 처리합니다.
-   **모델**: `app/Models/` 디렉토리에 위치하며, 데이터베이스 테이블과 매핑됩니다.
-   **라우트**: `routes/api.php` 파일에 API 라우트가 정의되어 있습니다.

### 코드 참조

-   사용자 관련 기능: `app/Http/Controllers/Api/UserController.php` (startLine: 19, endLine: 158)
-   경매 관련 기능: `app/Http/Controllers/Api/AuctionController.php` (startLine: 12, endLine: 93)
-   입찰 관련 기능: `app/Services/BidService.php` (startLine: 27, endLine: 75)
-   리뷰 관련 기능: `app/Services/ReviewService.php` (startLine: 22, endLine: 46)
-   인증 관련 기능: `app/Http/Requests/Auth/LoginRequest.php` (startLine: 12, endLine: 49)

이 요구사항 문서는 주어진 코드 스니펫을 기반으로 작성되었으며, 실제 구현과 다를 수 있습니다. 추가적인 요구사항이나 세부사항은 코드베이스를 직접 검토하여 확인해야 합니다.
