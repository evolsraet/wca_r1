[www]
user = sail
group = sail

listen = 127.0.0.1:9000
listen.owner = sail
listen.group = sail
listen.mode = 0660

pm = dynamic
pm.max_children = 50
pm.start_servers = 5
pm.min_spare_servers = 2
pm.max_spare_servers = 10
pm.max_requests = 1000

; 느린 로그
slowlog = /var/log/slow.log
request_slowlog_timeout = 10s

; 상태 페이지
pm.status_path = /fpm-status
ping.path = /fpm-ping
ping.response = pong

; 환경 변수
clear_env = no

; 프로세스 제어
catch_workers_output = yes
decorate_workers_output = no

; 보안
security.limit_extensions = .php .phar

; 에러 로그
php_admin_value[error_log] = /var/log/fpm-php.www.log
php_admin_flag[log_errors] = on

; 메모리 제한
php_admin_value[memory_limit] = 256M

; 실행 시간 제한
php_admin_value[max_execution_time] = 60
php_admin_value[max_input_time] = 60

; 파일 업로드
php_admin_value[upload_max_filesize] = 32M
php_admin_value[post_max_size] = 32M