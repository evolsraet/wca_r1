ğŸ“ í´ë” êµ¬ì¡° (Laravel ê¸°ì¤€)

resources/
â”œâ”€â”€ v2/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ app.v2.js (ì´ë¯¸ ìˆëŠ” ì „ì²´ alpine ì§„ì…í¬ì¸íŠ¸ - ê°€ê¸‰ì  ìˆ˜ì • x)
â”‚   â”‚   â”œâ”€â”€ util (ë¼ì´ë¸ŒëŸ¬ë¦¬ íŠ¹íˆ axios.js - ê°€ê¸‰ì  ìˆ˜ì • x)
â”‚   â”‚   â””â”€â”€ boards/
â”‚   â”‚       â”œâ”€â”€ board.js         â† Alpine ì´ˆê¸° ìƒíƒœ ë° ê³µí†µ ë©”ì†Œë“œ (ë‚ ì§œ í¬ë§·, ìœ í‹¸ ë“±)
â”‚   â”‚       â”œâ”€â”€ articleList.js          â† ê²Œì‹œê¸€ ëª©ë¡ ê¸°ëŠ¥
â”‚   â”‚       â”œâ”€â”€ articleView.js          â† ë‹¨ì¼ ê²Œì‹œê¸€ ë³´ê¸°
â”‚   â”‚       â””â”€â”€ articleForm.js          â† ì‘ì„± ë° ìˆ˜ì •
â”œâ”€â”€ â””â”€â”€ views/v2/
â”‚       â””â”€â”€ boards/
â”‚           â””â”€â”€ default/ (ê¸°ë³¸ ìŠ¤í‚¨ ì˜ˆì‹œ)
â”‚               â”œâ”€â”€ list.blade.php     â† ëª©ë¡ í™”ë©´
â”‚               â”œâ”€â”€ view.blade.php     â† ìƒì„¸ í™”ë©´
â”‚               â””â”€â”€ form.blade.php     â† ì‘ì„±/ìˆ˜ì • í™”ë©´

ğŸ§© ëª©ì :
- ì°¸ê³ ì‚¬í•­
    - ìŠ¤íƒ : laravel 10. Blade . Alpine JS. Bootstrap 5.3
    - vite : vite.config.v2.js
    - ê°œë°œí™˜ê²½ : sail ì‚¬ìš©

- ê²Œì‹œíŒ ì‹œìŠ¤í…œì„ ìŠ¤í‚¨ë³„ Blade + ê¸°ëŠ¥ë³„ JSë¡œ êµ¬ì„±
    - ìƒ‰ìƒì€ ì§ì ‘ ì½”ë“œë¥¼ ì“°ì§€ë§ê³  bootstrap í´ë˜ìŠ¤ í™œìš©
- sail í™œìš©
- JSëŠ” ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ë¶„ë¦¬ë˜ì–´ ìœ ì§€ë³´ìˆ˜ì— ìš©ì´
- ê²Œì‹œíŒì€ id, skin, ê¶Œí•œ, ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ êµ¬ì„±
- ê´€ë¦¬ì/ì‚¬ìš©ì ëª¨ë‘ ê°™ì€ êµ¬ì¡° ë‚´ì—ì„œ ê¶Œí•œ ë¶„ê¸°
- ë°±ì—”ë“œëŠ” ì™„ì„±ë˜ì–´ìˆê³  í”„ë¡ íŠ¸ì—”ë“œë§Œ ê°œë°œ

ğŸ“‚ ì‘ì—… ë²”ìœ„

1. ğŸ§  ëª¨ë¸ (ì°¸ê³ ìš© - ë°±ì—”ë“œ ì™„ì„±ë¨)
- Board í…Œì´ë¸”
  - ê²Œì‹œíŒ ì •ë³´, ì¹´í…Œê³ ë¦¬, ì‚¬ìš© ê¶Œí•œ, ìŠ¤í‚¨ëª…, í˜ì´ì§€ë„¤ì´ì…˜ ì„¤ì • ë“±ì„ í¬í•¨
  
  - ì˜ˆì‹œ:
    INSERT INTO `boards` (`id`, `categories`, `index_permission`, `show_permission`, `write_permission`, `reply_permission`, `comment_permission`, `attach_permission`, `paginate`, `skin`, `admins`, `created_at`, `updated_at`, `deleted_at`, `use_secret`)
    VALUES ('notice', '[\"ê³µì§€ì‚¬í•­\",\"ì—…ë°ì´íŠ¸ ì •ë³´\",\"ì´ë²¤íŠ¸ ì†Œì‹\"]', NULL, NULL, 'act.admin', 'act.admin', 'act.login', 'act.admin', '10', 'default', NULL, NOW(), NOW(), NULL, '0');

- Article í…Œì´ë¸”
  - ê²Œì‹œë¬¼ ì •ë³´, ì‘ì„±ì, ì¹´í…Œê³ ë¦¬, ë¹„ê³µê°œ ì—¬ë¶€, í™•ì¥ í•„ë“œ í¬í•¨
  - ì˜ˆì‹œ:
    INSERT INTO `articles` (`id`, `board_id`, `category`, `title`, `content`, `user_id`, `created_at`, `updated_at`, `is_secret`)
    VALUES ('1', 'notice', NULL, 'Fì—­ì´ë¼ëŠ” ê²ƒì€.', 'ë³¸ë¬¸ ë‚´ìš©...', '35', NOW(), NOW(), '0');

2. ğŸ”€ ì›¹ ë¼ìš°íŒ… (routes/web.php)

use App\Models\Board;
use Illuminate\Support\Facades\Route;

// ê²Œì‹œíŒ ë¼ìš°íŠ¸ ê·¸ë£¹
Route::prefix('v2/board/{boardId}')->name('board.')->group(function () {
    // ëª©ë¡ í˜ì´ì§€
    Route::get('/', function ($boardId) {
        ..
    })->name('list');

    // ìƒì„¸ í˜ì´ì§€
    Route::get('/view/{articleId}', function ($boardId, $articleId) {
    })->name('view');

    // ê¸€ì“°ê¸°/ìˆ˜ì • í˜ì´ì§€
    Route::get('/form/{articleId?}', function ($boardId, $articleId = null) {
    })->name('form');
});

3. ğŸ”— API ë¼ìš°íŠ¸ (routes/api.php) - ë°±ì—”ë“œ ì™„ì„±ë¨

use App\Http\Controllers\Api\ArticleApiController;

Route::prefix('v2/board/{boardId}/articles')->name('api.boards.articles.')->group(function () {
    Route::get('/', [ArticleApiController::class, 'index'])->name('index');          // ëª©ë¡
    Route::get('{articleId}', [ArticleApiController::class, 'show'])->name('show');  // ë‹¨ê±´
    Route::post('/', [ArticleApiController::class, 'store'])->name('store');         // ì‘ì„±
    Route::put('{articleId}', [ArticleApiController::class, 'update'])->name('update');    // ìˆ˜ì •
    Route::delete('{articleId}', [ArticleApiController::class, 'destroy'])->name('destroy'); // ì‚­ì œ
});

4. ğŸ§© JS êµ¬ì„± (í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í•„ìš”)

- board.js  : Alpine ì´ˆê¸° ìƒíƒœ ë° ê³µí†µ ë©”ì†Œë“œ (boardId, ê¶Œí•œ ì²´í¬, ë‚ ì§œ í¬ë§·, ë¬¸ìì—´ ì²˜ë¦¬ ë“±)
- list.js   : ê²Œì‹œê¸€ ëª©ë¡ ë¡œë”©, pagination, ê²€ìƒ‰ ì²˜ë¦¬
- view.js   : ê²Œì‹œê¸€ ë‹¨ê±´ ì¡°íšŒ ë° í™”ë©´ ì²˜ë¦¬
- form.js   : ì‘ì„± ë° ìˆ˜ì • ì²˜ë¦¬ (ìœ íš¨ì„± ê²€ì‚¬, íŒŒì¼ ì—…ë¡œë“œ ë“±)

ğŸ“ **JS ê°œë°œ ê·œì¹™**
- íŒŒì¼ëª…: ì¹´ë©œì¼€ì´ìŠ¤ (boardList.js, articleForm.js ë“±)
- DB í•„ë“œ: ìŠ¤ë„¤ì´í¬ì¼€ì´ìŠ¤ (board_id, created_at ë“±)
- í¼ ë°ì´í„°: `form` ê°ì²´ì— ë‹´ê¸° (ì°¸ê³ : register.js)
- ë¡œë”© ìƒíƒœ: `loading` ë³€ìˆ˜ ì‚¬ìš©
- íŒŒì¼ ì—…ë¡œë“œ: util/fileUpload.js í™œìš©
- ì—ëŸ¬ ì²˜ë¦¬: `errors` ê°ì²´ ì‚¬ìš©

ğŸ“‹ **í¼ ë°ì´í„° êµ¬ì¡° ì˜ˆì‹œ**
```javascript
form: {
    article: {
        title: '',
        content: '', 
        category: '',
        is_secret: 0
    }
},
errors: {},
loading: false
```

ğŸ“‹ **í¼ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ë²•** (components/forms/ í™œìš©)

```blade
@include('components.forms.input', [
    'label' => 'ì œëª©',
    'name' => 'article[title]',
    'required' => true,
    'errors' => 'errors'
])

@include('components.forms.fileUpload', [
    'label' => 'ì²¨ë¶€íŒŒì¼',
    'name' => 'attachments[]',
    'errors' => 'errors'
])
```

ğŸ“‹ **ì•„ì´ì½˜ ì‚¬ìš©** (MDI)
- ê²€ìƒ‰: `mdi-magnify`
- ì‘ì„±: `mdi-pencil`
- ì ê¸ˆ: `mdi-lock`
- ë¡œë”©: `mdi-loading mdi-spin`
- ë„¤ë¹„ê²Œì´ì…˜: `mdi-chevron-*`
- ì•¡ì…˜: `mdi-content-save`, `mdi-delete`

ğŸ“‹ **íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬:**
```javascript
import { appendFilesToFormData, setupFileUploadListeners } from '../util/fileUpload';
import { appendFormData } from '../util/axios';

init() {
    setupFileUploadListeners(this.form, this.$el);
}

async submit() {
    const formData = new FormData();
    const formElements = this.$el.elements;
    appendFormData(formData, formElements);
    
    const fileFields = ['attachments[]'];
    appendFilesToFormData(formData, fileFields, this.$el);
    
    const response = await this.$store.api.post(`/api/board/${this.boardId}/articles`, formData);
}
```

5. ğŸ§± Blade êµ¬ì„± (í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í•„ìš”)

ğŸ“‹ **ê¸°ë³¸ êµ¬ì¡°** (CSS í´ë˜ìŠ¤ë¡œ ìŠ¤í‚¨ ê´€ë¦¬)

```blade
<!-- list.blade.php - ê²Œì‹œê¸€ ëª©ë¡ -->
<div class="board-list board-skin-{{ $board->skin }}" 
     x-data="boardList" 
     x-init="init('{{ $board->id }}')">
    <!-- ë¡œë”©, ê²€ìƒ‰, í•„í„° ì˜ì—­ -->
    <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
</div>

<!-- view.blade.php - ê²Œì‹œê¸€ ìƒì„¸ -->
<div class="board-view board-skin-{{ $board->skin }}" 
     x-data="articleView" 
     x-init="init('{{ $board->id }}', {{ $articleId }})">
    <!-- ê²Œì‹œê¸€ ë‚´ìš© -->
    <!-- ì•¡ì…˜ ë²„íŠ¼ (ìˆ˜ì •/ì‚­ì œ/ëª©ë¡) -->
</div>

<!-- form.blade.php - ê²Œì‹œê¸€ ì‘ì„±/ìˆ˜ì • -->
<div class="board-form board-skin-{{ $board->skin }}" 
     x-data="articleForm" 
     x-init="init('{{ $board->id }}', {{ $articleId ?? 'null' }})">
    <form @submit.prevent="submit()">
        <!-- í¼ í•„ë“œë“¤ (ì¹´í…Œê³ ë¦¬, ì œëª©, ë‚´ìš©, ì²¨ë¶€íŒŒì¼ ë“±) -->
        <!-- ì•¡ì…˜ ë²„íŠ¼ (ì €ì¥/ì·¨ì†Œ) -->
    </form>
</div>
```

**ìŠ¤í‚¨ë³„ í´ë˜ìŠ¤ ì˜ˆì‹œ:**
- `board-skin-default` - ê¸°ë³¸ ìŠ¤í‚¨
- `board-skin-modern` - ëª¨ë˜ ìŠ¤í‚¨  
- `board-skin-classic` - í´ë˜ì‹ ìŠ¤í‚¨
- `board-skin-minimal` - ë¯¸ë‹ˆë©€ ìŠ¤í‚¨

ğŸ¯ **ìŠ¤íƒ€ì¼ë§**
- ìŠ¤í‚¨ë³„ ìŠ¤íƒ€ì¼: `/resources/v2/scss/board.scss` (í†µí•© ê´€ë¦¬)
- CSS í´ë˜ìŠ¤ë¡œ ìŠ¤í‚¨ êµ¬ë¶„ (`.board-skin-default`, `.board-skin-modern` ë“±)
- ê¸°ëŠ¥ë³„ + ìŠ¤í‚¨ë³„ ì¡°í•©ìœ¼ë¡œ ì„¸ë°€í•œ ìŠ¤íƒ€ì¼ë§ ê°€ëŠ¥

**SCSS êµ¬ì¡° ì˜ˆì‹œ:**
```scss
// board.scss
.board-list {
    // ê³µí†µ ëª©ë¡ ìŠ¤íƒ€ì¼
    
    &.board-skin-default {
        // ê¸°ë³¸ ìŠ¤í‚¨ ëª©ë¡ ìŠ¤íƒ€ì¼
    }
    
    &.board-skin-modern {
        // ëª¨ë˜ ìŠ¤í‚¨ ëª©ë¡ ìŠ¤íƒ€ì¼
    }
}

.board-form {
    // ê³µí†µ í¼ ìŠ¤íƒ€ì¼
    
    &.board-skin-default {
        // ê¸°ë³¸ ìŠ¤í‚¨ í¼ ìŠ¤íƒ€ì¼
    }
    
    &.board-skin-modern {
        // ëª¨ë˜ ìŠ¤í‚¨ í¼ ìŠ¤íƒ€ì¼
    }
}
```

6. ğŸ” ê¶Œí•œ ì²˜ë¦¬

- Bladeì—ì„œ `$board->write_permission`, `$board->index_permission` ë“± ì¡°ê±´ìœ¼ë¡œ ì œì–´
- ì˜ˆ:
@if(auth()->user()?->hasPermissionTo($board->write_permission))
    <a href="{{ route('board.form', $board->id) }}">ê¸€ì“°ê¸°</a>
@endif

7. ğŸ“š API í˜•ì‹ (ë°±ì—”ë“œ ì™„ì„±ë¨ : url ì— v2 ì—†ë‹¤)

    - ìš”ì²­ (GET /api/board/{boardId}/articles)
       where			// ì¡°ê±´ë¬¸ '|' ë¡œ êµ¬ë¶„ì§€ì–´ ì—¬ëŸ¬ ì—°ë™
                    // í‚¤ = í…Œì´ë¸”ëª…(ë³µìˆ˜).í•„ë“œ
                    // í‚¤:ê°’ or í‚¤:ë¹„êµ:ê°’
                    // ?where=users.id:<:10|users.id:>:1
                    // ë¹„êµ = like, whereIn. orWhere ê°€ëŠ¥
                    // SQL ê·¸ë£¹ë¬¶ê¸°(_and_, _or_) - ë©”ëª¨ ì°¸ê³ 
                    // ** ê°’ì´ _null ì¼ ê²½ìš°, null ë¹„êµ
        with			// ì—°ê´€ ë°ì´í„° ë¡œë”©
                    // ì˜ˆ: 1:1 ë‹¨ìˆ˜ (dealer), 1:N ë³µìˆ˜ (roles)
                    // ?with=dealer,roles
        doesnthave			// ì—°ê´€ë°ì´í„° ì—†ëŠ”ê²ƒë“¤
                    // with ì™€ ì‚¬ìš©ë²• ë™ì¼
                    // ?doesnthave=reviews
        mode			// íŠ¹ì •ëª¨ë“œ - ?mode=count ì‹œ pagenate ë˜ì§€ ì•Šì€ ì´ ê°¯ìˆ˜ ë¦¬í„´
        page			// í˜ì´ì§€
        paginate			// í˜ì´ì§€ë‹¹ ê°¯ìˆ˜ (ê¸°ë³¸10ê°œ ì£¼ì˜!)
        search_text			// ê²€ìƒ‰ì–´ ê²€ìƒ‰ (ì„œë²„ì—ì„œ ì•Œì•„ì„œ ë¦¬í„´) / 24.06.19 ì¶”ê°€ / ì‰¼í‘œêµ¬ë¶„ìœ¼ë¡œ ì—¬ëŸ¬ê°œ ê°€ëŠ¥
        search_id			// ì•„ì´ë””ë¡œ ì°¾ê¸°
        search_title			// ì œëª© ê²€ìƒ‰
        search_global			// ì „ì²´ ê²€ìƒ‰
        order_column			// ì •ë ¬ ì»¬ëŸ¼ (ì‰¼í‘œêµ¬ë¶„) / í•˜ìœ„ í…Œì´ë¸”ì˜ ê²½ìš° with ì™€ ë™ì¼í•œ ëª…ì¹­ ì˜ˆ) user.id
        order_direction			// ì •ë ¬ ìˆœ (asc, desc)
        withTrashed			// ì‚­ì œëœê²ƒë„ ë¶ˆëŸ¬ì˜¤ê¸° (24.5.29 ì¶”ê°€)
        
    - ë°ì´í„° ì „ì†¡ (POST/PUT)
    {
        "article": { 
            "title": "ì œëª©",
            "content": "ë‚´ìš©",
            "category": "ì¹´í…Œê³ ë¦¬",
            "is_secret": 0
        }
    }
    // íŒŒì¼ì€ ê°ì‹¸ì§€ ì•Šê³  ì§ì ‘ íŒŒì¼ë³€ìˆ˜ëª…ìœ¼ë¡œ ë³´ë‚¸ë‹¤

- ì‘ë‹µ : HTTP ì½”ë“œ í¬í•¨
  {
    "status": "ok", // (ok or fail)
    "message": "ì •ìƒì²˜ë¦¬ ë˜ì—ˆìŠµë‹ˆë‹¤.", // (error or else)
    "errors": null, // í•„ìˆ˜ì—¬ë¶€ ê²€ì¦ ì—ëŸ¬
    "data_count": 10,
    "data": [  // (ë‹¨ê±´ì€ ê°ì²´, ë¦¬ìŠ¤íŠ¸ëŠ” ë°°ì—´)
      {
        "id": 30,
        "board_id": "notice",
        "category": null,
        "title": "Yë°•ì‚¬ëŠ” í•´ì“±í•œ.",
        "content": "Rì˜ ë¶€ì¸ê³¼ ë”¸ì˜ ìŒì•…ê³¼ ê·¸ë¦¼ êµ¬ê²½ê³¼...",
        "user_id": 7,
        "extra1": null,
        "extra2": null,
        "extra1_date_at": null,
        "extra2_date_at": null,
        "created_at": "2025-05-28 13:08:50",
        "updated_at": "2025-05-28 13:08:50",
        "deleted_at": null,
        "is_secret": 0,
        "comments_count": 4
      }
    ],
    "links": {
      "first": "http://localhost/api/board/notice/articles?page=1",
      "last": "http://localhost/api/board/notice/articles?page=2",
      "prev": null,
      "next": "http://localhost/api/board/notice/articles?page=2"
    },
    "meta": {
      "current_page": 1,
      "from": 1,
      "last_page": 2,
      "per_page": 10,
      "to": 10,
      "total": 12
    }
  }

ğŸ¯ ìµœì¢… ëª©í‘œ

- ê¸°ëŠ¥ë³„ JS ëª¨ë“ˆí™” ë° ì¬ì‚¬ìš© ê°€ëŠ¥ êµ¬ì¡° í™•ë³´
- ìŠ¤í‚¨ë³„ Blade ë¶„í•  ë° í™•ì¥ ê°€ëŠ¥ì„± ë‚´ì¥
- ì„œë²„ì‚¬ì´ë“œ ê¶Œí•œ ì œì–´ + JS ëª¨ë“ˆì‹ êµ¬ì„± ë³‘í–‰
- ì‚¬ìš©ì/ê´€ë¦¬ì ê³µí†µ ê¸°ë°˜ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ ê²Œì‹œíŒ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥

